<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Commands</title>
<style>
  /* Global Reset & Grey Palette */
  *, *::before, *::after { box-sizing: border-box; }
  
  :root {
    --bg-main: #0d0d0d;
    --bg-side: #161616;
    --bg-card: #1a1a1a;
    --bg-card-hover: #222222;
    --text-primary: #eeeeee;
    --text-secondary: #999999;
    --accent-grey: #333333;
    --border-grey: #2a2a2a;
  }

  body {
    margin: 0;
    background-color: var(--bg-main);
    font-family: 'Inter', 'Segoe UI', Roboto, sans-serif;
    color: var(--text-primary);
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  /* Sidebar Navigation */
  .sidebar {
    width: 300px;
    background-color: var(--bg-main);
    padding: 40px 20px;
    border-right: 1px solid var(--border-grey);
    display: flex;
    flex-direction: column;
    gap: 20px;
    overflow-y: auto;
  }

  .sidebar h2 {
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-secondary);
    margin: 0 0 10px 10px;
  }

  .category-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .cat-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    padding: 12px 15px;
    border-radius: 8px;
    text-align: left;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s;
  }

  .cat-btn:hover {
    background: var(--bg-side);
    color: var(--text-primary);
  }

  .cat-btn.active {
    background: var(--bg-card);
    color: var(--text-primary);
  }

  .cat-btn .count {
    font-size: 12px;
    opacity: 0.6;
  }

  /* Main Content Area */
  .main-content {
    flex: 1;
    padding: 60px 5vw;
    overflow-y: auto;
    background: linear-gradient(180deg, #111 0%, #0d0d0d 100%);
  }

  .header-section {
    max-width: 800px;
    margin-bottom: 40px;
  }

  h1 { font-size: 32px; margin: 0 0 8px 0; }
  .subtitle { color: var(--text-secondary); margin-bottom: 30px; }

  /* Search Bar */
  .search-wrapper {
    position: relative;
    max-width: 500px;
    margin-bottom: 40px;
  }

  #searchBox {
    width: 100%;
    padding: 14px 14px 14px 45px;
    background: var(--bg-card);
    border: 1px solid var(--border-grey);
    border-radius: 8px;
    color: white;
    font-size: 15px;
    outline: none;
  }

  #searchBox:focus { border-color: #555; }

  .search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0.4;
  }

  /* Command List Items (Wide) */
  .command-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 800px;
  }

  .command-item {
    background: var(--bg-card);
    border: 1px solid var(--border-grey);
    border-radius: 10px;
    padding: 20px;
    transition: transform 0.1s, background 0.2s;
    cursor: pointer;
  }

  .command-item:hover {
    background: var(--bg-card-hover);
  }

  .cmd-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }

  .cmd-name {
    font-weight: 700;
    font-size: 17px;
    color: var(--text-primary);
  }

  .cmd-alias {
    font-size: 12px;
    color: var(--text-secondary);
    background: var(--accent-grey);
    padding: 2px 8px;
    border-radius: 4px;
  }

  .cmd-desc {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.5;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar { width: 8px; }
  ::-webkit-scrollbar-track { background: var(--bg-main); }
  ::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }
</style>
</head>
<body>

<aside class="sidebar">
  <h2>Categories</h2>
  <div class="category-list" id="categoryList">
    </div>
</aside>

<main class="main-content">
  <div class="header-section">
    <h1>Commands</h1>
    <p class="subtitle">Browse and search through all available commands.</p>
    
    <div class="search-wrapper">
      <span class="search-icon">üîç</span>
      <input type="text" id="searchBox" placeholder="Search commands...">
    </div>
  </div>

  <div class="command-list" id="commandList">
    </div>
</main>

<script>
(async function() {
  const categoryList = document.getElementById('categoryList');
  const commandList = document.getElementById('commandList');
  const searchBox = document.getElementById('searchBox');

  let commandsJSON;
  try {
    const resp = await fetch('./commands.json');
    commandsJSON = await resp.json();
  } catch (e) {
    commandList.innerHTML = `<p style="color:grey;">Add a commands.json file to display content.</p>`;
    return;
  }

  const categories = Object.keys(commandsJSON);
  let activeCategory = 'All';

  function renderSidebar() {
    categoryList.innerHTML = '';
    categories.forEach(cat => {
      const btn = document.createElement('button');
      btn.className = `cat-btn ${cat === activeCategory ? 'active' : ''}`;
      
      const count = cat === 'All' 
        ? categories.filter(c => c !== 'All').reduce((acc, c) => acc + commandsJSON[c].length, 0)
        : commandsJSON[cat].length;

      btn.innerHTML = `<span>${cat}</span> <span class="count">${count}</span>`;
      btn.onclick = () => {
        activeCategory = cat;
        renderSidebar();
        renderCommands();
      };
      categoryList.appendChild(btn);
    });
  }

  function renderCommands() {
    const term = searchBox.value.toLowerCase();
    commandList.innerHTML = '';

    let pool = [];
    if (activeCategory === 'All') {
      categories.forEach(c => { if(c !== 'All') pool = pool.concat(commandsJSON[c]); });
    } else {
      pool = commandsJSON[activeCategory] || [];
    }

    const filtered = pool.filter(c => 
      c.name.toLowerCase().includes(term) || 
      (c.description && c.description.toLowerCase().includes(term))
    );

    filtered.forEach(cmd => {
      const div = document.createElement('div');
      div.className = 'command-item';
      div.innerHTML = `
        <div class="cmd-header">
          <span class="cmd-name">/${cmd.name}</span>
          ${cmd.aliases ? `<span class="cmd-alias">${cmd.aliases.join(', ')}</span>` : ''}
        </div>
        <div class="cmd-desc">${cmd.description || 'No description available.'}</div>
      `;
      commandList.appendChild(div);
    });
  }

  searchBox.oninput = renderCommands;
  renderSidebar();
  renderCommands();
})();
</script>

</body>
</html>
